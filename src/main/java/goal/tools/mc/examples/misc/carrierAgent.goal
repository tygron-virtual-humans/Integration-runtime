main: carrierAgent{
	knowledge{
		parcel(p1). parcel(p2).
		
		order(P1,P2,L) :- loc(P1,L), loc(P2,L).
	}
	beliefs{
		loc(p1,a). 
		loc(p2,a). 
		
		truckAt(a).
		
		loc(gasstation,ab1).
		fuel(20).
		next(a,ab1). 
		next(ab1,ab2).
		next(ab2,b). 
	}
	goals{
		%loc(p1,b), loc(p2,b).
		order(p1,p2,b).
	}
	program{
	
		if		a-goal(order(P1,P2,L)), not(goal(loc(X,Y))) 
		then	adopt(loc(P1,L), loc(P2,L)).
	
		if goal(loc(P,Y)), bel( truckAt(X), loc(P,X), not(X=Y) ) then load(P).

		if bel(truckAt(a)), not(bel( loc(P,a), parcel(P) )) 
		then adopt(truckAt(b)).

		if goal(truckAt(b)) then move.

		if bel(truckAt(X), in(P,truck)), goal(loc(P,X)) then unload(P).

		%if bel(loc(gasstation,X)) then tank.
	}
	actionspec{
		move{
			pre{ truckAt(X), next(X,Y), fuel(Z), Z > 0, Znew is Z-1 }
			post{ truckAt(Y), not(truckAt(X)), fuel(Znew), not(fuel(Z)) }
		}
		load(P){
			pre{ parcel(P), loc(P,X), truckAt(X) }
			post{ in(P,truck), not(loc(P,X)) }
		}
		unload(P){
			pre{ in(P,truck), truckAt(X) }
			post{ loc(P,X), not(in(P,truck)) }
			%post{ truckAt(X), not(in(P,truck)) }
		}
		%tank{
		%	pre{ loc(truck,X), loc(gasstation,X), fuel(Y), Y<3 }
		%	post{ fuel(3), not(fuel(Y)) }
		%}
	}
}